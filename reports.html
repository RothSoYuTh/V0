<!-- for clear local storage
 
localStorage.removeItem('scamReports');
console.log('Remaining data:', localStorage);

-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reports - ScamShield</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="icon" type="image/png" href="./logo1.png" sizes="16x16">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    

    
    .report-card {
      transition: all 0.2s ease;
      border: 1px solid #e5e7eb;
      background: linear-gradient(to bottom, #ffffff, #fafafa);
    }
    
    .report-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
      border-color: #d1d5db;
    }
    
    .search-input {
      background: linear-gradient(to right, #f8fafc, #ffffff);
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
    }
    
    .search-input:focus {
      background: white;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .evidence-image {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .evidence-image:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
    
    .modal-backdrop {
      backdrop-filter: blur(8px);
      background: rgba(0, 0, 0, 0.85);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="w-10 h-10  flex items-center justify-center">
          <img src="logo1.png" alt="">
        </div>
        <div>
          <span class="font-bold text-gray-800">ScamShield</span>
          <p class="text-xs text-gray-500">Protect your purchase</p>
        </div>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="index.html" class="text-gray-600 hover:text-blue-600 font-medium">Home</a>
        <a href="report-scam.html" class="text-gray-600 hover:text-blue-600 font-medium">Report Scam</a>
        <a href="reports.html" class="text-blue-600 font-medium border-b-2 border-blue-600 pb-1">Reports</a>
        <a href="check-seller.html" class="text-gray-600 hover:text-blue-600 font-medium">Check Seller</a>
        <a href="analyze-chat.html" class="text-gray-600 hover:text-blue-600 font-medium">Analyze Chat</a>
        <a href="learn.html" class="text-gray-600 hover:text-blue-600 font-medium">Learn</a>
        <a href="profile.html"><i class="fa-regular fa-user"></i></a>
      </nav>
      <button class="md:hidden text-gray-600" onclick="toggleMobileMenu()">
        <i class="fas fa-bars text-xl"></i>
      </button>
    </div>
    <div id="mobileMenu" class="hidden md:hidden bg-white border-t px-4 py-3">
      <nav class="flex flex-col gap-3 text-sm">
        <a href="index.html" class="text-gray-600">Home</a>
        <a href="report-scam.html" class="text-gray-600">Report Scam</a>
        <a href="reports.html" class="text-blue-600 font-medium border-l-4 border-blue-600 pl-3">Reports</a>
        <a href="check-seller.html" class="text-gray-600">Check Seller</a>
        <a href="analyze-chat.html" class="text-gray-600">Analyze Chat</a>
        <a href="learn.html" class="text-gray-600">Learn</a>
        <a href="profile.html"><i class="fa-regular fa-user"></i></a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Page Header -->
    <div class="bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-2xl p-8 mb-10 border border-blue-100 shadow-sm">
      <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6">
        <div class="flex items-center gap-6">
          <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg">
            <i class="fas fa-database text-white text-2xl"></i>
          </div>
          <div>
            <h1 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-2">Scam Reports Database</h1>
            <div class="flex items-center gap-4">
              <div class="flex items-center gap-2">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span class="text-gray-600 text-sm"><span id="reportCount" class="font-bold text-blue-700">0</span> reports submitted</span>
              </div>
              <div class="w-1 h-1 bg-gray-300 rounded-full"></div>
              <div class="text-gray-500 text-sm">
                <i class="fas fa-users mr-1"></i> Community Protected
              </div>
            </div>
          </div>
        </div>
        <a href="report-scam.html" class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3.5 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
          <i class="fas fa-plus"></i>
          Report New Scam
        </a>
      </div>
    </div>

    <!-- Search Section -->
    <div class="mb-10 bg-white rounded-2xl p-6 shadow-sm border border-gray-200">
      <div class="mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-2">Search Scam Reports</h2>
        <p class="text-gray-600 text-sm">Find suspicious sellers by name, phone number, platform, or description</p>
      </div>
      <div class="relative">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <i class="fas fa-search text-gray-400"></i>
        </div>
        <input 
          type="text" 
          id="searchInput" 
          placeholder="Search seller names, phone numbers (e.g., +855), platforms, or descriptions..."
          class="search-input w-full pl-12 pr-4 py-4 rounded-xl text-sm placeholder-gray-500 focus:outline-none"
        >
        <div class="absolute inset-y-0 right-0 pr-4 flex items-center">
          <button id="clearSearch" class="text-gray-400 hover:text-gray-600 transition-colors hidden">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div class="mt-6">
        <p class="text-gray-500 text-sm mb-3">Quick search:</p>
        <div class="flex flex-wrap gap-2">
          <button onclick="quickSearch('facebook')" class="px-4 py-2 bg-blue-50 text-blue-700 text-sm rounded-lg hover:bg-blue-100 transition-colors">
            <i class="fab fa-facebook mr-2"></i>Facebook
          </button>
          <button onclick="quickSearch('telegram')" class="px-4 py-2 bg-purple-50 text-purple-700 text-sm rounded-lg hover:bg-purple-100 transition-colors">
            <i class="fab fa-telegram mr-2"></i>Telegram
          </button>
          <button onclick="quickSearch('tiktok')" class="px-4 py-2 bg-gray-50 text-gray-700 text-sm rounded-lg hover:bg-gray-100 transition-colors">
            <i class="fab fa-tiktok mr-2"></i>TikTok
          </button>
          <button onclick="clearSearch()" class="px-4 py-2 bg-gray-100 text-gray-600 text-sm rounded-lg hover:bg-gray-200 transition-colors">
            <i class="fas fa-times mr-2"></i>Clear Search
          </button>
        </div>
      </div>
    </div>

    <!-- Reports Grid -->
    <div id="reportsList" class="grid gap-6"></div>

    <!-- Empty State -->
    <div id="emptyState" class="bg-gradient-to-br from-white to-gray-50 rounded-2xl p-12 text-center border border-gray-200">
      <div class="w-20 h-20 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner">
        <i class="fas fa-database text-blue-500 text-3xl"></i>
      </div>
      <h3 class="text-xl font-semibold text-gray-800 mb-3">No scam reports found</h3>
      <p class="text-gray-600 max-w-md mx-auto mb-8">The database is currently empty. Be the first to submit a scam report and help protect others from online scams.</p>
      <a href="report-scam.html" class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-3.5 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-md hover:shadow-lg">
        <i class="fas fa-plus"></i>
        Submit First Report
      </a>
    </div>

    <!-- Loading State -->
    <div id="loadingState" class="hidden">
      <div class="text-center py-12">
        <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full mb-6">
          <div class="w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
        </div>
        <p class="text-gray-600">Loading reports...</p>
      </div>
    </div>
  </main>

  <!-- Image Modal -->
  <div id="imageModal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4 modal-backdrop">
    <div class="relative max-w-4xl w-full">
      <button onclick="closeImageModal()" 
              class="absolute -top-14 right-0 text-white/80 hover:text-white transition-colors p-2">
        <i class="fas fa-times text-3xl"></i>
      </button>
      <div class="bg-white rounded-xl overflow-hidden shadow-2xl">
        <img id="modalImage" src="" alt="Evidence" class="w-full h-auto max-h-[80vh] object-contain">
      </div>
      <div class="text-center mt-4">
        <p class="text-white/70 text-sm">Click outside or press ESC to close</p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gradient-to-b from-gray-900 to-black text-white border-t border-gray-800 mt-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="flex flex-col md:flex-row items-center justify-between gap-8">
        <div class="text-center md:text-left">
          <div class="flex items-center gap-3 justify-center md:justify-start mb-4">
            <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-full flex items-center justify-center shadow-md">
              <i class="fas fa-shield-alt"></i>
            </div>
            <span class="font-bold text-xl bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent">ScamShield</span>
          </div>
          <p class="text-gray-400 text-sm max-w-md">Protecting the community from online scams through collective awareness and reporting.</p>
        </div>
        
        <div class="text-center md:text-right">
          <p class="text-gray-300 text-sm mb-2">Â© 2025 ScamShield - Online Selling Scam Report Platform</p>
          <p class="text-gray-400 text-xs mb-1">Developed by Sorayuth Roth & Srongchhay Ly</p>
          <p class="text-gray-500 text-xs mb-3">Cambodia Academy of Digital Technology (CADT)</p>
          <p class="text-gray-500 text-xs">Data stored locally in your browser. Your privacy is protected.</p>
        </div>
      </div>
    </div>
  </footer>

  <script>
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileMenu');
      menu.classList.toggle('hidden');
    }

    // Image modal functions
    function openImageModal(imageSrc) {
      document.getElementById('modalImage').src = imageSrc;
      document.getElementById('imageModal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    function closeImageModal() {
      document.getElementById('imageModal').classList.add('hidden');
      document.body.style.overflow = 'auto';
    }
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeImageModal();
    });
    
    document.getElementById('imageModal').addEventListener('click', (e) => {
      if (e.target.id === 'imageModal') closeImageModal();
    });

    // Search functionality
    const searchInput = document.getElementById('searchInput');
    const clearSearchBtn = document.getElementById('clearSearch');
    
    function searchReports(query) {
      const reports = JSON.parse(localStorage.getItem('scamReports') || '[]');
      if (!query.trim()) return reports;
      
      const searchLower = query.toLowerCase();
      return reports.filter(report => {
        return (
          (report.sellerName && report.sellerName.toLowerCase().includes(searchLower)) ||
          (report.phoneNumber && report.phoneNumber.includes(query)) ||
          (report.platform && report.platform.toLowerCase().includes(searchLower)) ||
          (report.description && report.description.toLowerCase().includes(searchLower))
        );
      });
    }

    function quickSearch(term) {
      searchInput.value = term;
      const filtered = searchReports(term);
      displayFilteredReports(filtered);
      clearSearchBtn.classList.remove('hidden');
    }

    function clearSearch() {
      searchInput.value = '';
      loadReports();
      clearSearchBtn.classList.add('hidden');
    }

    searchInput.addEventListener('input', (e) => {
      const query = e.target.value.trim();
      if (query) {
        clearSearchBtn.classList.remove('hidden');
        const filtered = searchReports(query);
        displayFilteredReports(filtered);
      } else {
        clearSearchBtn.classList.add('hidden');
        loadReports();
      }
    });
    
    clearSearchBtn.addEventListener('click', clearSearch);

    // Load and display reports
    function loadReports() {
      try {
        const reports = JSON.parse(localStorage.getItem('scamReports') || '[]');
        const reportsList = document.getElementById('reportsList');
        const emptyState = document.getElementById('emptyState');
        const reportCount = document.getElementById('reportCount');
        const loadingState = document.getElementById('loadingState');

        reportCount.textContent = reports.length;

        if (reports.length === 0) {
          emptyState.classList.remove('hidden');
          reportsList.innerHTML = '';
          loadingState.classList.add('hidden');
        } else {
          emptyState.classList.add('hidden');
          loadingState.classList.add('hidden');
          
          // Sort by date (newest first)
          reports.sort((a, b) => new Date(b.date) - new Date(a.date));
          
          reportsList.innerHTML = reports.map(report => {
            const hasScreenshots = report.screenshots && Array.isArray(report.screenshots) && report.screenshots.length > 0;
            const date = new Date(report.date);
            const formattedDate = date.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'short', 
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
            });
            
            return `
              <div class="report-card rounded-2xl p-6">
                <div class="flex flex-col lg:flex-row lg:items-start justify-between gap-4 mb-6">
                  <div class="flex-1">
                    <div class="flex items-center gap-3 mb-3">
                      <h3 class="text-xl font-bold text-gray-900">${report.sellerName || 'Unknown Seller'}</h3>
                      <span class="bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-semibold px-3 py-1.5 rounded-full">
                        <i class="fas fa-exclamation-triangle mr-1"></i>Reported
                      </span>
                    </div>
                    <div class="flex flex-wrap gap-4 text-sm">
                      <div class="flex items-center gap-2 text-gray-700">
                        <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                          <i class="fas fa-phone text-blue-600"></i>
                        </div>
                        <div>
                          <div class="font-medium">${report.phoneNumber || 'No phone provided'}</div>
                          <div class="text-gray-500 text-xs">Phone Number</div>
                        </div>
                      </div>
                      <div class="flex items-center gap-2 text-gray-700">
                        <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                          <i class="fas fa-globe text-purple-600"></i>
                        </div>
                        <div>
                          <div class="font-medium capitalize">${report.platform || 'Unknown'}</div>
                          <div class="text-gray-500 text-xs">Platform</div>
                        </div>
                      </div>
                      <div class="flex items-center gap-2 text-gray-700">
                        <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                          <i class="fas fa-calendar text-green-600"></i>
                        </div>
                        <div>
                          <div class="font-medium">${formattedDate}</div>
                          <div class="text-gray-500 text-xs">Reported Date</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  ${report.profileUrl ? `
                    <div class="lg:self-start">
                      <a href="${report.profileUrl}" target="_blank" 
                         class="inline-flex items-center gap-2 bg-gradient-to-r from-gray-100 to-gray-50 text-gray-700 px-4 py-2.5 rounded-xl text-sm font-medium hover:from-gray-200 hover:to-gray-100 transition-all border border-gray-200">
                        <i class="fas fa-external-link-alt"></i>
                        View Profile
                      </a>
                    </div>
                  ` : ''}
                </div>
                
                <div class="mb-6">
                  <h4 class="text-sm font-semibold text-gray-700 mb-3">Incident Description</h4>
                  <div class="bg-gradient-to-br from-gray-50 to-white rounded-xl p-5 border border-gray-200">
                    <p class="text-gray-600 leading-relaxed">${report.description || 'No description provided'}</p>
                  </div>
                </div>
                
                ${hasScreenshots ? `
                  <div class="mb-6">
                    <div class="flex items-center justify-between mb-4">
                      <h4 class="text-sm font-semibold text-gray-700">Evidence Screenshots (${report.screenshots.length})</h4>
                      <span class="text-gray-500 text-xs">Click to enlarge</span>
                    </div>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">
                      ${report.screenshots.map((screenshot, index) => {
                        const cleanScreenshot = screenshot.replace(/"/g, "'");
                        return `
                          <div class="relative group">
                            <img src="${cleanScreenshot}" 
                                 alt="Evidence ${index + 1}" 
                                 class="evidence-image w-full h-32 object-cover rounded-lg border border-gray-300 cursor-pointer"
                                 onclick="openImageModal('${cleanScreenshot.replace(/'/g, "\\'")}')">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 rounded-lg transition-opacity duration-300 flex items-end p-2">
                              <span class="text-white text-xs font-medium">View Image ${index + 1}</span>
                            </div>
                            <div class="absolute top-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded-full">
                              ${index + 1}
                            </div>
                          </div>
                        `;
                      }).join('')}
                    </div>
                  </div>
                ` : `
                  <div class="mb-6">
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200">
                      <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center">
                          <i class="fas fa-image text-gray-400"></i>
                        </div>
                        <div>
                          <p class="text-gray-600 font-medium">No evidence images provided</p>
                          <p class="text-gray-500 text-xs">This report was submitted without screenshots</p>
                        </div>
                      </div>
                    </div>
                  </div>
                `}
                
                <div class="pt-6 border-t border-gray-200">
                  <div class="flex justify-between items-center">
                    <div class="text-xs text-gray-500">
                      Report ID: #${report.id ? report.id.toString().slice(-6).toUpperCase() : 'N/A'}
                    </div>
                    <div class="text-xs text-gray-500">
                      <i class="fas fa-shield-alt mr-1"></i>
                      Community Protected
                    </div>
                  </div>
                </div>
              </div>
            `;
          }).join('');
        }
      } catch (error) {
        console.error('Error loading reports:', error);
        document.getElementById('reportsList').innerHTML = `
          <div class="bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl p-8 text-center border border-red-200">
            <div class="w-16 h-16 bg-gradient-to-br from-red-100 to-pink-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
            </div>
            <h3 class="text-lg font-semibold text-red-700 mb-2">Error Loading Reports</h3>
            <p class="text-red-600 text-sm">${error.message}</p>
            <button onclick="loadReports()" class="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-colors">
              <i class="fas fa-redo mr-2"></i>Try Again
            </button>
          </div>
        `;
      }
    }

    function displayFilteredReports(reports) {
      const reportsList = document.getElementById('reportsList');
      const emptyState = document.getElementById('emptyState');
      const loadingState = document.getElementById('loadingState');

      loadingState.classList.add('hidden');
      
      if (reports.length === 0) {
        emptyState.classList.remove('hidden');
        reportsList.innerHTML = '';
      } else {
        emptyState.classList.add('hidden');
        reportsList.innerHTML = reports.map(report => {
          const hasScreenshots = report.screenshots && Array.isArray(report.screenshots) && report.screenshots.length > 0;
          const date = new Date(report.date);
          const formattedDate = date.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
          
          return `
            <div class="report-card rounded-2xl p-6">
              <div class="flex flex-col lg:flex-row lg:items-start justify-between gap-4 mb-6">
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-3">
                    <h3 class="text-xl font-bold text-gray-900">${report.sellerName || 'Unknown Seller'}</h3>
                    <span class="bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-semibold px-3 py-1.5 rounded-full">
                      <i class="fas fa-exclamation-triangle mr-1"></i>Reported
                    </span>
                  </div>
                  <div class="flex flex-wrap gap-4 text-sm">
                    <div class="flex items-center gap-2 text-gray-700">
                      <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-phone text-blue-600"></i>
                      </div>
                      <div>
                        <div class="font-medium">${report.phoneNumber || 'No phone provided'}</div>
                        <div class="text-gray-500 text-xs">Phone Number</div>
                      </div>
                    </div>
                    <div class="flex items-center gap-2 text-gray-700">
                      <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-globe text-purple-600"></i>
                      </div>
                      <div>
                        <div class="font-medium capitalize">${report.platform || 'Unknown'}</div>
                        <div class="text-gray-500 text-xs">Platform</div>
                      </div>
                    </div>
                    <div class="flex items-center gap-2 text-gray-700">
                      <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-calendar text-green-600"></i>
                      </div>
                      <div>
                        <div class="font-medium">${formattedDate}</div>
                        <div class="text-gray-500 text-xs">Reported Date</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="mb-6">
                <h4 class="text-sm font-semibold text-gray-700 mb-3">Incident Description</h4>
                <div class="bg-gradient-to-br from-gray-50 to-white rounded-xl p-5 border border-gray-200">
                  <p class="text-gray-600 leading-relaxed">${report.description || 'No description provided'}</p>
                </div>
              </div>
              
              ${hasScreenshots ? `
                <div class="mb-6">
                  <h4 class="text-sm font-semibold text-gray-700 mb-4">Evidence Screenshots</h4>
                  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
                    ${report.screenshots.map((screenshot, index) => {
                      const cleanScreenshot = screenshot.replace(/"/g, "'");
                      return `
                        <div class="relative group">
                          <img src="${cleanScreenshot}" 
                               alt="Evidence ${index + 1}" 
                               class="evidence-image w-full h-32 object-cover rounded-lg border border-gray-300 cursor-pointer"
                               onclick="openImageModal('${cleanScreenshot.replace(/'/g, "\\'")}')">
                          <div class="absolute top-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded-full">
                            ${index + 1}
                          </div>
                        </div>
                      `;
                    }).join('')}
                  </div>
                </div>
              ` : ''}
            </div>
          `;
        }).join('');
      }
    }

    // Initialize on page load
    window.addEventListener('DOMContentLoaded', () => {
      // Show loading state briefly
      document.getElementById('loadingState').classList.remove('hidden');
      setTimeout(loadReports, 300);
    });
  </script>
</body>
</html>